<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Minigame</title>

    <style>
        body {
            margin: 0;
            padding: 0;
            height: 100vh;
            font-family: 'Kanit', sans-serif;
            display: flex;
            justify-content: center;
            /* ‡∏à‡∏±‡∏î‡∏Å‡∏∂‡πà‡∏á‡∏Å‡∏•‡∏≤‡∏á‡πÅ‡∏ô‡∏ß‡∏ô‡∏≠‡∏ô */
            align-items: center;
            /* ‡∏à‡∏±‡∏î‡∏Å‡∏∂‡πà‡∏á‡∏Å‡∏•‡∏≤‡∏á‡πÅ‡∏ô‡∏ß‡∏ï‡∏±‡πâ‡∏á */
            background-color: rgb(117, 160, 128);
            position: relative;
            /* ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏´‡πâ .dice ‡∏ó‡∏µ‡πà absolute ‡∏≠‡∏¢‡∏π‡πà‡∏ö‡∏ô body */
        }

        .image {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            /* ‡∏•‡∏ö margin ‡∏ã‡πâ‡∏≤‡∏¢-‡∏Ç‡∏ß‡∏≤ ‡∏ñ‡πâ‡∏≤‡∏°‡∏µ */
            margin: 0;
        }

        .image img {
            border-radius: 5px;
            width: 30px;
            height: 30px;
            /* ‡∏•‡∏ö margin ‡∏ã‡πâ‡∏≤‡∏¢-‡∏Ç‡∏ß‡∏≤ */
            margin: 0 auto 20px auto;
            /* ‡∏Å‡∏∂‡πà‡∏á‡∏Å‡∏•‡∏≤‡∏á‡πÅ‡∏ô‡∏ß‡∏ô‡∏≠‡∏ô + margin bottom */
            display: block;
            /* ‡∏ä‡πà‡∏ß‡∏¢‡πÉ‡∏´‡πâ margin auto ‡∏ó‡∏≥‡∏á‡∏≤‡∏ô */
        }

        .buttonrandom {
            cursor: pointer;
            color: #ffff;
        }

        .buttonrandom:hover {
            color: #ffffff8e;
        }


        .background {
            position: absolute;
            /* ‡πÄ‡∏û‡∏¥‡πà‡∏° */
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background-color: rgba(0, 0, 0, 0.681);
            width: 35vh;
            height: 45vh;
            border-radius: 10px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            z-index: 1;
            /* ‡πÉ‡∏´‡πâ‡∏≠‡∏¢‡∏π‡πà‡∏ö‡∏ô */
            transition: opacity 0.4s ease, visibility 0.4s ease;
        }


        .hidden {
            opacity: 0;
            visibility: hidden;
            transition: opacity 0.5s ease, visibility 0.5s ease;
        }

        .visible {
            opacity: 1;
            visibility: visible;
        }

        /* ‡∏õ‡∏£‡∏±‡∏ö .dice ‡πÉ‡∏´‡πâ‡∏≠‡∏¢‡∏π‡πà‡∏î‡πâ‡∏≤‡∏ô‡∏ã‡πâ‡∏≤‡∏¢‡∏Ç‡∏≠‡∏á‡∏à‡∏≠ */
        .dice {
            position: fixed;
            /* ‡∏•‡∏≠‡∏¢‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å layout ‡∏õ‡∏Å‡∏ï‡∏¥ */
            left: 100px;
            /* ‡∏´‡πà‡∏≤‡∏á‡∏à‡∏≤‡∏Å‡∏Ç‡∏≠‡∏ö‡∏ã‡πâ‡∏≤‡∏¢ 30px */
            top: 39%;
            /* ‡∏≠‡∏¢‡∏π‡πà‡∏Å‡∏•‡∏≤‡∏á‡∏à‡∏≠‡πÉ‡∏ô‡πÅ‡∏ô‡∏ß‡∏ï‡∏±‡πâ‡∏á */
            transform: translateY(-50%);
            /* ‡∏î‡∏∂‡∏á‡∏Ç‡∏∂‡πâ‡∏ô‡∏Ñ‡∏£‡∏∂‡πà‡∏á‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏π‡∏á‡∏ï‡∏±‡∏ß‡πÄ‡∏≠‡∏á‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏Å‡∏∂‡πà‡∏á‡∏Å‡∏•‡∏≤‡∏á‡πÅ‡∏ô‡∏ß‡∏ï‡∏±‡πâ‡∏á */
            cursor: pointer;
            border: 2px solid #333;
            background-color: rgba(165, 42, 42, 0.838);
            display: flex;
            justify-content: flex-start;
            padding: 25px 25px;
            border-radius: 5px;
            color: rgb(0, 0, 0);
        }

        .dice p {
            font-size: 12px;
            margin: 0;
        }

        .dice:hover {
            color: rgb(0, 0, 0);
            background-color: rgba(165, 42, 42, 0.768);
        }

        .board {
            display: grid;
            grid-template-columns: repeat(7, 1fr);
            /* 7 ‡∏Ñ‡∏≠‡∏•‡∏±‡∏°‡∏ô‡πå */
            gap: 10px;
            padding: 20px;
            max-width: 600px;
            margin: 40px auto;
            font-family: 'Kanit', sans-serif;
        }

        .cell {
            background-color: #ffffffaa;
            border: 2px solid #282525;
            padding: 20px;
            text-align: center;
            border-radius: 8px;
            font-weight: bold;
            color: #333;
        }

        .control {
            display: none;
        }

        .player {
            width: 20px;
            height: 20px;
            background-color: red;
            border-radius: 50%;
            margin: 5px auto 0 auto;
        }

        .math-question {
            position: absolute;
            top: 20px;
            right: 20px;
            width: 300px;
            background-color: #fff;
            border: 2px solid #333;
            padding: 15px;
            border-radius: 10px;
            font-family: 'Kanit', sans-serif;
            color: #000;
            z-index: 10;
        }

        .math-question input {
            width: 50%;
            padding: 8px;
            margin-top: 10px;
            font-size: 16px;
            border-radius: 5px;
            border: 1px solid #999;
        }

        .math-question button {
            margin-top: 10px;
            padding: 8px 12px;
            font-size: 16px;
            background-color: #007bff;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
        }

        .math-question button:hover {
            color: white;
            background-color: #007bffc4;
            transform: scale(0.9);
        }

        #answerResultText {
            margin-top: 10px;
            font-weight: bold;
        }

        #winMessageContainer {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            border: 2px solid #333;
            width: 30vh;
            height: 30vh;
            background-color: rgba(255, 255, 255, 0.9);
            padding: 20px;
            font-size: 16px;
            display: none;
            /* ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô‡∏ã‡πà‡∏≠‡∏ô‡πÑ‡∏ß‡πâ */
            justify-content: center;
            align-items: center;
            text-align: center;
            flex-direction: column;
            cursor: pointer;
            border-radius: 10px;
            box-shadow: 0 0 20px rgba(0, 0, 0, 0.2);
            z-index: 9999;
        }

        #winMessageContainer p:hover {
            color: #000000c8;
            transform: scale(0.9);
        }

        .Description {
            position: fixed;
            top: 10px;
            left: 10px;
            background-color: rgba(0, 0, 0, 0.7);
            /* ‡∏™‡∏µ‡∏û‡∏∑‡πâ‡∏ô‡∏´‡∏•‡∏±‡∏á‡πÇ‡∏õ‡∏£‡πà‡∏á‡πÉ‡∏™ */
            color: white;
            padding: 12px 16px;
            border-radius: 10px;
            font-family: 'Kanit', sans-serif;
            font-size: 14px;
            z-index: 9999;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.3);
        }

        .Description p {
            margin: 4px 0;
        }


        @media (max-width: 600px) {
            .board {
                grid-template-columns: repeat(4, 1fr);
                /* ‡∏ö‡∏≠‡∏£‡πå‡∏î‡πÄ‡∏•‡πá‡∏Å‡∏•‡∏á */
                gap: 5px;
                padding: 10px;
            }

            .cell {
                padding: 10px;
                font-size: 14px;
                border-radius: 5;
            }

            .control {
                position: fixed;
                border: 2px solid #333;
                top: 0;
                left: 50%;
                transform: translateX(-50%);
                width: 90%;
                height: 10%;
                text-align: center;
                background-color: rgba(255, 255, 255, 0.9);
                padding: 8px 20px;
                box-shadow: 0 2px 10px rgba(0, 0, 0, 0.2);
                z-index: 1000;
            }

            .control input {
                font-size: 14px;
                padding: 5px 10px;
                width: 100px;
                margin-right: 8px;
                border: 2px solid #333;
            }

            .control button {
                font-size: 14px;
                padding: 5px 10px;
                border: 2px solid #333;
                color: #000;
            }

            .control button:hover {
                color: #000000c0;
                background-color: #28a7469f;
                transform: scale(0.9);
            }

            .dice {
                position: fixed;
                top: 12%;
                /* ‡∏≠‡∏¢‡∏π‡πà‡πÉ‡∏ï‡πâ .control ‡∏ó‡∏µ‡πà‡∏™‡∏π‡∏á ~50px + padding */
                left: 20px;
                padding: 10px;
                border: 2px solid #333;
                background-color: rgba(165, 42, 42, 0.838);
                display: flex;
                justify-content: flex-start;
                border-radius: 5px;
                color: rgb(0, 0, 0);
                z-index: 999;
                /* ‡πÉ‡∏´‡πâ‡∏≠‡∏¢‡∏π‡πà‡∏î‡πâ‡∏≤‡∏ô‡∏ö‡∏ô */
            }

            .dice p {
                font-size: 10px;
                margin: 0;
            }

            #winMessageContainer {
                position: fixed;
                top: 50%;
                left: 50%;
                transform: translate(-50%, -50%);
                border: 2px solid #333;
                width: 30vh;
                height: 30vh;
                background-color: rgba(255, 255, 255, 0.9);
                padding: 20px;
                font-size: 16px;
                display: none;
                /* ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô‡∏ã‡πà‡∏≠‡∏ô‡πÑ‡∏ß‡πâ */
                justify-content: center;
                align-items: center;
                text-align: center;
                flex-direction: column;
                cursor: pointer;
                border-radius: 10px;
                box-shadow: 0 0 20px rgba(0, 0, 0, 0.2);
                z-index: 9999;
            }

            #winMessageContainer p:hover {
                color: #000000c8;
                transform: scale(0.9);
            }


            .math-question {
                position: absolute;
                bottom: 10px;
                /* ‡∏≠‡∏¢‡∏π‡πà‡∏ä‡∏¥‡∏î‡∏•‡πà‡∏≤‡∏á */
                left: 5%;
                right: 5%;
                top: 80%;
                width: 84%;
                height: 30%;
                /* ‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡∏Ñ‡∏ß‡∏≤‡∏°‡∏Å‡∏ß‡πâ‡∏≤‡∏á‡∏ó‡∏µ‡πà responsive */
                padding: 10px;
                font-size: 14px;
                background-color: #fff;
                border: 2px solid #333;
                border-radius: 10px;
                z-index: 1000;
                box-shadow: 0 2px 10px rgba(0, 0, 0, 0.2);
            }

            .math-question input {
                width: 100%;
                font-size: 14px;
                padding: 6px;
                margin-top: 10px;
                box-sizing: border-box;
            }

            .math-question button {
                width: 100%;
                font-size: 14px;
                padding: 6px;
                margin-top: 10px;
                background-color: #007bff;
                color: white;
                border: none;
                border-radius: 5px;
                cursor: pointer;
            }

            .background {
                position: fixed;
                z-index: 2000;
            }
        }
    </style>

    <link href="https://fonts.googleapis.com/css2?family=Kanit&display=swap" rel="stylesheet">

</head>

<body>
    <div class="background hidden" id="background">
        <div class="image" id="imageContainer"></div>

        <div class="buttonrandom" id="randomBtn">
            <p>‡∏Å‡∏î‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏™‡∏∏‡πà‡∏°</p>
        </div>

        <!-- ‡∏ã‡πà‡∏≠‡∏ô‡πÑ‡∏ß‡πâ‡πÑ‡∏°‡πà‡πÉ‡∏´‡πâ‡πÄ‡∏´‡πá‡∏ô ‡πÅ‡∏ï‡πà‡πÉ‡∏ä‡πâ‡∏î‡∏∂‡∏á‡∏•‡∏¥‡∏á‡∏Å‡πå -->
        <div id="imageLinks" style="display: none;">
            <a href="img/1.png"></a>
            <a href="img/2.png"></a>
            <a href="img/3.png"></a>
            <a href="img/4.png"></a>
            <a href="img/5.png"></a>
            <a href="img/6.png"></a>
        </div>
    </div>

    <div class="dice">
        <p>‡∏•‡∏π‡∏Å‡πÄ‡∏ï‡πã‡∏≤</p>
    </div>

    <div class="board">
        <div class="cell">‡∏à‡∏∏‡∏î‡πÄ‡∏£‡∏¥‡πà‡∏°<div class="player"></div>
        </div>
        <!-- ‡∏ä‡πà‡∏≠‡∏á‡∏ó‡∏µ‡πà 2‚Äì27 -->
        <div class="cell">2</div>
        <div class="cell">3</div>
        <div class="cell">4</div>
        <div class="cell">5</div>
        <div class="cell">6</div>
        <div class="cell">7</div>
        <div class="cell">8</div>
        <div class="cell">9</div>
        <div class="cell">10</div>
        <div class="cell">11</div>
        <div class="cell">12</div>
        <div class="cell">13</div>
        <div class="cell">14</div>
        <div class="cell">15</div>
        <div class="cell">16</div>
        <div class="cell">17</div>
        <div class="cell">18</div>
        <div class="cell">19</div>
        <div class="cell">20</div>
        <div class="cell">21</div>
        <div class="cell">22</div>
        <div class="cell">23</div>
        <div class="cell">24</div>
        <div class="cell">25</div>
        <div class="cell">26</div>
        <div class="cell">27</div>
        <div class="cell">‡∏à‡∏∏‡∏î‡∏™‡∏¥‡πâ‡∏ô‡∏™‡∏∏‡∏î</div>
    </div>

    <div class="control">
        <input type="number" id="moveInput" min="1" max="6" placeholder="‡∏õ‡πâ‡∏≠‡∏ô‡πÄ‡∏•‡∏Ç 1-6">
        <button onclick="movePlayer()">‡∏Å‡∏î‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÄ‡∏î‡∏¥‡∏ô‡∏´‡∏ô‡πâ‡∏≤</button>
    </div>
    <div class="text">
        <div id="moveStepsDisplay"></div>
    </div>

    <div class="math-question" id="mathQuestionBox">
        <h3>‡πÇ‡∏à‡∏ó‡∏¢‡πå‡∏Ñ‡∏ì‡∏¥‡∏ï‡∏®‡∏≤‡∏™‡∏ï‡∏£‡πå</h3>
        <p id="mathQuestionText">-</p>
        <input type="text" id="answerInput" placeholder="‡∏û‡∏¥‡∏°‡∏û‡πå‡∏Ñ‡∏≥‡∏ï‡∏≠‡∏ö..." />
        <button id="submitAnswerBtn">‡∏™‡πà‡∏á‡∏Ñ‡∏≥‡∏ï‡∏≠‡∏ö</button>
        <p id="answerResultText"></p>
    </div>

    <div id="winMessageContainer">
        <h2>‡∏¢‡∏¥‡∏ô‡∏î‡∏µ‡∏î‡πâ‡∏ß‡∏¢‡∏Ñ‡∏∏‡∏ì‡∏ä‡∏ô‡∏∞‡πÄ‡∏Å‡∏°‡∏ô‡∏µ‡πâ‡πÅ‡∏•‡πâ‡∏ß!</h2>
        <p id="restartBtn">‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÉ‡∏´‡∏°‡πà</p>
    </div>

    <div class="protect" id="protectionNotice" style="display: none;">
        üö´ ‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡∏Å‡∏≤‡∏£‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô‡∏Å‡∏≤‡∏£‡∏ñ‡∏≠‡∏¢‡∏´‡∏•‡∏±‡∏á: <span id="protectionCount">1</span> ‡∏Ñ‡∏£‡∏±‡πâ‡∏á
    </div>

    <div class="Description">
        <p>‡∏Å‡∏î E ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÄ‡∏õ‡∏¥‡∏î‡∏´‡∏ô‡πâ‡∏≤‡∏ó‡∏≠‡∏¢‡∏•‡∏π‡∏Å‡πÄ‡∏ï‡πã‡∏≤</p>
        <p>‡∏Å‡∏î R ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ó‡∏≠‡∏¢‡∏•‡∏π‡∏Å‡πÄ‡∏ï‡πã‡∏≤</p>
    </div>

    <audio id="diceSound" src="dice-roll.mp3" preload="auto"></audio>

    <script src="GameRandom.js"></script>

    <script>// ‡πÇ‡∏Ñ‡πâ‡∏î JavaScript ‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡∏ó‡∏µ‡πà‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡πÅ‡∏•‡πâ‡∏ß

        const links = document.querySelectorAll('#imageLinks a');
        const imageContainer = document.getElementById('imageContainer');
        const randomBtn = document.getElementById('randomBtn');
        const diceSound = new Audio('dice-roll.mp3');
        diceSound.preload = 'auto';

        let intervalId = null;
        let lastIndex = 0;
        let questionAnswered = true; // ‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏ö‡πà‡∏á‡∏ä‡∏µ‡πâ‡∏ß‡πà‡∏≤‡∏ï‡∏≠‡∏ö‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°‡πÅ‡∏•‡πâ‡∏ß‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà

        let numberDisplay = document.createElement('div');
        numberDisplay.style.fontSize = '1.5rem';
        numberDisplay.style.marginBottom = '40px';
        numberDisplay.style.fontWeight = 'bold';
        numberDisplay.style.color = '#fff';
        numberDisplay.textContent = '';
        imageContainer.appendChild(numberDisplay);

        const rows = 4;
        const cols = 7;
        const totalCells = rows * cols;

        function showRandomImage() {
            const randomIndex = Math.floor(Math.random() * links.length);
            lastIndex = randomIndex;
            const randomImgSrc = links[randomIndex].getAttribute('href');

            imageContainer.innerHTML = '';
            imageContainer.appendChild(numberDisplay);

            const img = document.createElement('img');
            img.src = randomImgSrc;
            imageContainer.appendChild(img);
        }

        function placePlayerAt(position) {
            const cells = document.querySelectorAll('.cell');
            document.querySelectorAll('.player').forEach(p => p.remove()); // ‡∏•‡∏ö‡∏ú‡∏π‡πâ‡πÄ‡∏•‡πà‡∏ô‡πÄ‡∏Å‡πà‡∏≤‡∏≠‡∏≠‡∏Å

            if (position >= 0 && position < totalCells) {
                const newPlayer = document.createElement('div');
                newPlayer.classList.add('player');
                cells[position].appendChild(newPlayer);
            }

            updatePlayerPositionText(position);
        }

        function updatePlayerPositionText(position) {
            const posDisplay = document.getElementById('playerPositionDisplay');
            if (posDisplay) {
                posDisplay.textContent = `‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô‡∏Ç‡∏≠‡∏á‡∏ú‡∏π‡πâ‡πÄ‡∏•‡πà‡∏ô: ${position + 1} / ${totalCells}`;
            }
        }

        randomBtn.addEventListener('click', () => {
            if (!questionAnswered) {
                alert('‚ùó ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏ï‡∏≠‡∏ö‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°‡∏Å‡πà‡∏≠‡∏ô‡∏ó‡∏≠‡∏¢‡∏•‡∏π‡∏Å‡πÄ‡∏ï‡πã‡∏≤');
                return;
            }
            if (intervalId !== null) return; // ‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô‡∏Å‡∏≤‡∏£‡∏Å‡∏î‡∏ã‡πâ‡∏≥‡∏Ç‡∏ì‡∏∞‡∏ó‡∏≠‡∏¢‡∏≠‡∏¢‡∏π‡πà

            questionAnswered = false; // ‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏ß‡πà‡∏≤‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡∏ï‡∏≠‡∏ö‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°
            numberDisplay.textContent = '';
            diceSound.currentTime = 0;
            diceSound.loop = true;
            diceSound.play();

            intervalId = setInterval(showRandomImage, 100); // ‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÅ‡∏≠‡∏ô‡∏¥‡πÄ‡∏°‡∏ä‡∏±‡∏ô‡∏ó‡∏≠‡∏¢‡∏•‡∏π‡∏Å‡πÄ‡∏ï‡πã‡∏≤

            setTimeout(() => {
                clearInterval(intervalId); // ‡∏´‡∏¢‡∏∏‡∏î‡πÅ‡∏≠‡∏ô‡∏¥‡πÄ‡∏°‡∏ä‡∏±‡∏ô
                intervalId = null;

                diceSound.pause();
                diceSound.currentTime = 0;

                numberDisplay.textContent = `‡∏•‡∏π‡∏Å‡πÄ‡∏ï‡πã‡∏≤ : ${lastIndex + 1}`;
                imageContainer.innerHTML = '';
                imageContainer.appendChild(numberDisplay);

                const img = document.createElement('img');
                img.src = links[lastIndex].getAttribute('href');
                imageContainer.appendChild(img);

                document.getElementById('moveInput').value = lastIndex + 1; // ‡πÉ‡∏™‡πà‡∏Ñ‡πà‡∏≤‡∏•‡∏π‡∏Å‡πÄ‡∏ï‡πã‡∏≤‡∏•‡∏á‡πÉ‡∏ô‡∏ä‡πà‡∏≠‡∏á input
                movePlayer(); // ‡πÄ‡∏£‡∏µ‡∏¢‡∏Å‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡πÄ‡∏î‡∏¥‡∏ô‡∏ú‡∏π‡πâ‡πÄ‡∏•‡πà‡∏ô
            }, 4790); // ‡∏£‡∏∞‡∏¢‡∏∞‡πÄ‡∏ß‡∏•‡∏≤‡πÅ‡∏≠‡∏ô‡∏¥‡πÄ‡∏°‡∏ä‡∏±‡∏ô
        });

        const dice = document.querySelector('.dice');
        const background = document.getElementById('background');

        dice.addEventListener('click', () => {
            background.classList.toggle('hidden'); // ‡∏ã‡πà‡∏≠‡∏ô/‡πÅ‡∏™‡∏î‡∏á‡∏´‡∏ô‡πâ‡∏≤‡∏ó‡∏≠‡∏¢‡∏•‡∏π‡∏Å‡πÄ‡∏ï‡πã‡∏≤
        });

        let currentPosition = 0; // ‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô‡∏Ç‡∏≠‡∏á‡∏ú‡∏π‡πâ‡πÄ‡∏•‡πà‡∏ô

        function movePlayer() {
            const input = document.getElementById('moveInput');
            let moveSteps = parseInt(input.value);

            if (isNaN(moveSteps) || moveSteps < 1 || moveSteps > 6) {
                alert('‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡πÄ‡∏•‡∏Ç‡∏£‡∏∞‡∏´‡∏ß‡πà‡∏≤‡∏á 1 ‡∏ñ‡∏∂‡∏á 6');
                input.value = '';
                return;
            }

            let newPosition = currentPosition + moveSteps;

            // ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏´‡∏≤‡∏Å‡πÄ‡∏î‡∏¥‡∏ô‡πÄ‡∏Å‡∏¥‡∏ô‡∏ä‡πà‡∏≠‡∏á‡∏™‡∏∏‡∏î‡∏ó‡πâ‡∏≤‡∏¢
            if (newPosition > totalCells - 1) {
                const exceed = newPosition - (totalCells - 1);
                newPosition = (totalCells - 1) - exceed; // ‡∏ñ‡∏≠‡∏¢‡∏´‡∏•‡∏±‡∏á‡∏Å‡∏•‡∏±‡∏ö‡∏°‡∏≤
                showProtectionMessage(`‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏•‡∏π‡∏Å‡πÄ‡∏ï‡πã‡∏≤‡∏ó‡∏µ‡πà‡∏Ñ‡∏∏‡∏ì‡∏ó‡∏≠‡∏¢‡πÑ‡∏î‡πâ‡πÄ‡∏Å‡∏¥‡∏ô 28 ‡∏ä‡πà‡∏≠‡∏á ‡∏ñ‡∏≠‡∏¢‡∏´‡∏•‡∏±‡∏á‡∏°‡∏≤ ${exceed} ‡∏ä‡πà‡∏≠‡∏á`);
            } else {
                showMoveNotice(`‡πÄ‡∏î‡∏¥‡∏ô‡∏´‡∏ô‡πâ‡∏≤‡πÑ‡∏õ ${moveSteps} ‡∏ä‡πà‡∏≠‡∏á`);
            }

            currentPosition = newPosition;
            placePlayerAt(currentPosition); // ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á‡∏ú‡∏π‡πâ‡πÄ‡∏•‡πà‡∏ô‡∏ö‡∏ô‡∏Å‡∏£‡∏∞‡∏î‡∏≤‡∏ô

            // ‡πÅ‡∏™‡∏î‡∏á‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°‡∏Ñ‡∏ì‡∏¥‡∏ï‡∏®‡∏≤‡∏™‡∏ï‡∏£‡πå‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏≠‡∏¢‡∏π‡πà‡∏ö‡∏ô‡∏ä‡πà‡∏≠‡∏á‡∏£‡∏∞‡∏´‡∏ß‡πà‡∏≤‡∏á 1 ‡∏ñ‡∏∂‡∏á 26
            if (currentPosition >= 1 && currentPosition <= 26) {
                showRandomMathQuestion();
            } else {
                clearMathQuestion(); // ‡πÄ‡∏Ñ‡∏•‡∏µ‡∏¢‡∏£‡πå‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°‡∏´‡∏≤‡∏Å‡πÑ‡∏°‡πà‡∏≠‡∏¢‡∏π‡πà‡πÉ‡∏ô‡∏ä‡πà‡∏≠‡∏á‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°
            }

            // ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡πÄ‡∏á‡∏∑‡πà‡∏≠‡∏ô‡πÑ‡∏Ç‡∏Å‡∏≤‡∏£‡∏ä‡∏ô‡∏∞
            if (currentPosition === totalCells - 1) {
                document.getElementById('winMessageContainer').style.display = 'flex'; // ‡πÅ‡∏™‡∏î‡∏á‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ä‡∏ô‡∏∞
            } else {
                document.getElementById('winMessageContainer').style.display = 'none';
            }

            input.value = ''; // ‡∏•‡πâ‡∏≤‡∏á‡∏Ñ‡πà‡∏≤‡πÉ‡∏ô‡∏ä‡πà‡∏≠‡∏á input
        }

        // ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡πÅ‡∏™‡∏î‡∏á‡∏Å‡∏≤‡∏£‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô‡∏Å‡∏≤‡∏£‡πÄ‡∏Ñ‡∏•‡∏∑‡πà‡∏≠‡∏ô‡∏ó‡∏µ‡πà
        function showMoveNotice(msg) {
            let moveNotice = document.getElementById('moveNotice');
            if (!moveNotice) {
                moveNotice = document.createElement('div');
                moveNotice.id = 'moveNotice';
                moveNotice.style.position = 'fixed';
                moveNotice.style.top = '70px'; // ‡∏õ‡∏£‡∏±‡∏ö‡πÉ‡∏´‡πâ‡∏≠‡∏¢‡∏π‡πà‡∏î‡πâ‡∏≤‡∏ô‡∏ö‡∏ô‡∏°‡∏≤‡∏Å‡∏Ç‡∏∂‡πâ‡∏ô
                moveNotice.style.left = '50%'; // ‡∏à‡∏±‡∏î‡∏Å‡∏∂‡πà‡∏á‡∏Å‡∏•‡∏≤‡∏á‡πÅ‡∏ô‡∏ß‡∏ô‡∏≠‡∏ô
                moveNotice.style.transform = 'translateX(-50%)'; // ‡πÄ‡∏•‡∏∑‡πà‡∏≠‡∏ô‡∏Å‡∏•‡∏±‡∏ö 50% ‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏ß‡∏≤‡∏°‡∏Å‡∏ß‡πâ‡∏≤‡∏á
                moveNotice.style.backgroundColor = '#28a745';
                moveNotice.style.color = '#fff';
                moveNotice.style.padding = '10px 20px'; // ‡∏õ‡∏£‡∏±‡∏ö padding ‡πÉ‡∏´‡πâ‡πÄ‡∏•‡πá‡∏Å‡∏•‡∏á
                moveNotice.style.borderRadius = '8px'; // ‡∏õ‡∏£‡∏±‡∏ö‡∏Ñ‡∏ß‡∏≤‡∏°‡πÇ‡∏Ñ‡πâ‡∏á‡∏°‡∏ô
                moveNotice.style.boxShadow = '0 2px 10px rgba(0,0,0,0.3)'; // ‡∏õ‡∏£‡∏±‡∏ö‡πÄ‡∏á‡∏≤
                moveNotice.style.fontFamily = 'Kanit, sans-serif';
                moveNotice.style.fontSize = '16px'; // ‡∏õ‡∏£‡∏±‡∏ö‡∏Ç‡∏ô‡∏≤‡∏î‡∏ü‡∏≠‡∏ô‡∏ï‡πå‡πÉ‡∏´‡πâ‡πÄ‡∏•‡πá‡∏Å‡∏•‡∏á
                moveNotice.style.zIndex = '8000';
                moveNotice.style.display = 'none';
                document.body.appendChild(moveNotice);
            }

            moveNotice.textContent = msg;
            moveNotice.style.display = 'block';

            setTimeout(() => {
                moveNotice.style.display = 'none';
            }, 3000);
        }

        // Event listener ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡∏Å‡∏î Enter ‡πÉ‡∏ô‡∏ä‡πà‡∏≠‡∏á input ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÄ‡∏î‡∏¥‡∏ô
        document.getElementById('moveInput').addEventListener('keydown', function (e) {
            if (e.key === 'Enter') movePlayer();
        });

        // Event listener ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡∏Å‡∏î‡∏õ‡∏∏‡πà‡∏° 'E' ‡∏´‡∏£‡∏∑‡∏≠ 'e' ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÄ‡∏õ‡∏¥‡∏î/‡∏õ‡∏¥‡∏î‡∏´‡∏ô‡πâ‡∏≤‡∏ó‡∏≠‡∏¢‡∏•‡∏π‡∏Å‡πÄ‡∏ï‡πã‡∏≤
        document.addEventListener('keydown', function (e) {
            if (e.key === 'e' || e.key === 'E') {
                dice.click();
            }
        });

        // Event listener ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡∏Å‡∏î‡∏õ‡∏∏‡πà‡∏° 'R' ‡∏´‡∏£‡∏∑‡∏≠ 'r' ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ó‡∏≠‡∏¢‡∏•‡∏π‡∏Å‡πÄ‡∏ï‡πã‡∏≤
        document.addEventListener('keydown', function (e) {
            if (e.key === 'r' || e.key === 'R') {
                if (!questionAnswered) {
                    alert('‚ùó ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏ï‡∏≠‡∏ö‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°‡∏Å‡πà‡∏≠‡∏ô‡∏ó‡∏≠‡∏¢‡∏•‡∏π‡∏Å‡πÄ‡∏ï‡πã‡∏≤');
                    return;
                }
                randomBtn.click();
            }
        });

        let currentQuestion = null; // ‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÅ‡∏™‡∏î‡∏á
        const questions = [
            { question: '‡πÅ‡∏Å‡πâ‡∏™‡∏°‡∏Å‡∏≤‡∏£ 2x + 3 = 7', answer: '2', explanation: '‡∏•‡∏ö 3 ‡∏à‡∏≤‡∏Å‡∏ó‡∏±‡πâ‡∏á‡∏™‡∏≠‡∏á‡∏Ç‡πâ‡∏≤‡∏á‡∏à‡∏∞‡πÑ‡∏î‡πâ 2x = 4 ‡πÅ‡∏•‡πâ‡∏ß‡∏´‡∏≤‡∏£ 2 ‡∏à‡∏∞‡πÑ‡∏î‡πâ x = 2' },
            { question: '‡∏´‡∏≤‡∏Ñ‡πà‡∏≤ x: x¬≤ = 25', answer: '5‡∏´‡∏£‡∏∑‡∏≠-5', explanation: 'x¬≤ = 25 ‡∏î‡∏±‡∏á‡∏ô‡∏±‡πâ‡∏ô x = ‚àö25 ‡∏ã‡∏∂‡πà‡∏á‡∏Ñ‡∏∑‡∏≠ 5 ‡∏´‡∏£‡∏∑‡∏≠ -5' },
            { question: '‡∏û‡∏∑‡πâ‡∏ô‡∏ó‡∏µ‡πà‡∏™‡∏µ‡πà‡πÄ‡∏´‡∏•‡∏µ‡πà‡∏¢‡∏°‡∏à‡∏±‡∏ï‡∏∏‡∏£‡∏±‡∏™ ‡∏î‡πâ‡∏≤‡∏ô = 4', answer: '16', explanation: '‡∏û‡∏∑‡πâ‡∏ô‡∏ó‡∏µ‡πà = ‡∏î‡πâ‡∏≤‡∏ô √ó ‡∏î‡πâ‡∏≤‡∏ô = 4 √ó 4 = 16' },
            { question: '‡πÄ‡∏ã‡∏ï‡∏Ç‡∏≠‡∏á‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡πÄ‡∏â‡∏û‡∏≤‡∏∞‡∏ó‡∏µ‡πà‡∏ô‡πâ‡∏≠‡∏¢‡∏Å‡∏ß‡πà‡∏≤ 10', answer: '2,3,5,7', explanation: '‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡πÄ‡∏â‡∏û‡∏≤‡∏∞‡∏ô‡πâ‡∏≠‡∏¢‡∏Å‡∏ß‡πà‡∏≤ 10 ‡πÑ‡∏î‡πâ‡πÅ‡∏Å‡πà 2, 3, 5, 7 (‡∏´‡∏≤‡∏£‡πÑ‡∏î‡πâ‡πÄ‡∏â‡∏û‡∏≤‡∏∞ 1 ‡∏Å‡∏±‡∏ö‡∏ï‡∏±‡∏ß‡πÄ‡∏≠‡∏á)' },
            { question: '‡∏û‡∏´‡∏∏‡∏ô‡∏≤‡∏°: (x + 2)(x - 3) = ?', answer: 'x^2-x-6', explanation: '‡πÉ‡∏ä‡πâ‡∏™‡∏π‡∏ï‡∏£‡∏Å‡∏≤‡∏£‡∏Å‡∏£‡∏∞‡∏à‡∏≤‡∏¢: x(x - 3) + 2(x - 3) = x¬≤ - 3x + 2x - 6 = x¬≤ - x - 6' },
            { question: '‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ä‡∏±‡∏ô‡∏Ç‡∏≠‡∏á‡πÄ‡∏™‡πâ‡∏ô‡∏ï‡∏£‡∏á y = 3x + 1', answer: '3', explanation: '‡∏à‡∏≤‡∏Å‡∏™‡∏°‡∏Å‡∏≤‡∏£ y = mx + c ‡∏Ñ‡πà‡∏≤ m ‡∏Ñ‡∏∑‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ä‡∏±‡∏ô ‡∏ã‡∏∂‡πà‡∏á‡πÉ‡∏ô‡∏ó‡∏µ‡πà‡∏ô‡∏µ‡πâ‡∏Ñ‡∏∑‡∏≠ 3' },
            { question: '‡∏à‡∏á‡∏´‡∏≤‡∏ú‡∏•‡∏£‡∏ß‡∏°: 1 + 2 + 3 + ... + 10', answer: '55', explanation: '‡πÉ‡∏ä‡πâ‡∏™‡∏π‡∏ï‡∏£ n(n+1)/2 ‚Üí 10√ó11/2 = 55' },
            { question: '‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå‡∏Ç‡∏≠‡∏á 3^3 ‡∏Ñ‡∏∑‡∏≠?', answer: '27', explanation: '3 √ó 3 √ó 3 = 9 √ó 3 = 27' },
            { question: '‡∏à‡∏á‡∏´‡∏≤‡∏Ñ‡πà‡∏≤ x: 4x = 20', answer: '5', explanation: '‡∏´‡∏≤‡∏£‡∏ó‡∏±‡πâ‡∏á‡∏™‡∏≠‡∏á‡∏Ç‡πâ‡∏≤‡∏á‡∏î‡πâ‡∏ß‡∏¢ 4 ‡∏à‡∏∞‡πÑ‡∏î‡πâ x = 5' },
            { question: '‡∏™‡∏°‡∏Å‡∏≤‡∏£ y = mx + c, m ‡∏Ñ‡∏∑‡∏≠‡∏≠‡∏∞‡πÑ‡∏£?', answer: '‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ä‡∏±‡∏ô', explanation: '‡πÉ‡∏ô‡∏™‡∏°‡∏Å‡∏≤‡∏£‡πÄ‡∏ä‡∏¥‡∏á‡πÄ‡∏™‡πâ‡∏ô y = mx + c, m ‡∏Ñ‡∏∑‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ä‡∏±‡∏ô (slope)' },
            { question: '‡∏°‡∏∏‡∏°‡∏†‡∏≤‡∏¢‡πÉ‡∏ô‡∏Ç‡∏≠‡∏á‡∏™‡∏≤‡∏°‡πÄ‡∏´‡∏•‡∏µ‡πà‡∏¢‡∏°‡∏£‡∏ß‡∏°‡∏Å‡∏±‡∏ô‡πÑ‡∏î‡πâ‡∏Å‡∏µ‡πà‡∏≠‡∏á‡∏®‡∏≤?', answer: '180', explanation: '‡∏°‡∏∏‡∏°‡∏†‡∏≤‡∏¢‡πÉ‡∏ô‡∏Ç‡∏≠‡∏á‡∏™‡∏≤‡∏°‡πÄ‡∏´‡∏•‡∏µ‡πà‡∏¢‡∏°‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏£‡∏ß‡∏°‡∏Å‡∏±‡∏ô‡∏à‡∏∞‡πÄ‡∏õ‡πá‡∏ô 180 ‡∏≠‡∏á‡∏®‡∏≤' },
            { question: '‚àö49 ‡∏°‡∏µ‡∏Ñ‡πà‡∏≤‡πÄ‡∏ó‡πà‡∏≤‡πÑ‡∏£?', answer: '7', explanation: '‡πÄ‡∏û‡∏£‡∏≤‡∏∞ 7 √ó 7 = 49 ‡∏î‡∏±‡∏á‡∏ô‡∏±‡πâ‡∏ô ‚àö49 = 7' },
            { question: '‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡πÄ‡∏â‡∏û‡∏≤‡∏∞‡πÅ‡∏£‡∏Å‡∏™‡∏∏‡∏î 3 ‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏Ñ‡∏∑‡∏≠?', answer: '2,3,5', explanation: '‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡πÄ‡∏â‡∏û‡∏≤‡∏∞ 3 ‡∏ï‡∏±‡∏ß‡πÅ‡∏£‡∏Å‡∏Ñ‡∏∑‡∏≠ 2, 3, ‡πÅ‡∏•‡∏∞ 5 (‡∏´‡∏≤‡∏£‡πÑ‡∏î‡πâ‡πÅ‡∏Ñ‡πà 1 ‡∏Å‡∏±‡∏ö‡∏ï‡∏±‡∏ß‡∏°‡∏±‡∏ô‡πÄ‡∏≠‡∏á)' },
            { question: '10! (‡πÅ‡∏ü‡∏Å‡∏ó‡∏≠‡πÄ‡∏£‡∏µ‡∏¢‡∏•‡∏Ç‡∏≠‡∏á 10) ‡∏Ñ‡∏∑‡∏≠?', answer: '3628800', explanation: '10! = 10√ó9√ó8√ó7√ó6√ó5√ó4√ó3√ó2√ó1 = 3628800' },
            { question: '‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå‡∏Ç‡∏≠‡∏á 2^5 ‡∏Ñ‡∏∑‡∏≠?', answer: '32', explanation: '2 √ó 2 √ó 2 √ó 2 √ó 2 = 32' }
        ];

        let remainingQuestions = [...questions]; // ‡∏Ñ‡∏±‡∏î‡∏•‡∏≠‡∏Å‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÅ‡∏ï‡πà‡∏•‡∏∞‡∏£‡∏≠‡∏ö

        function getRandomNonRepeatingQuestion() {
            if (remainingQuestions.length === 0) {
                remainingQuestions = [...questions]; // ‡∏£‡∏µ‡πÄ‡∏ã‡πá‡∏ï‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°‡∏´‡∏≤‡∏Å‡∏´‡∏°‡∏î‡πÅ‡∏•‡πâ‡∏ß
            }
            const index = Math.floor(Math.random() * remainingQuestions.length);
            return remainingQuestions.splice(index, 1)[0]; // ‡∏™‡∏∏‡πà‡∏°‡πÅ‡∏•‡∏∞‡∏ô‡∏≥‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å‡∏≠‡∏≤‡∏£‡πå‡πÄ‡∏£‡∏¢‡πå
        }

        function showRandomMathQuestion() {
            currentQuestion = getRandomNonRepeatingQuestion();
            document.getElementById('mathQuestionText').textContent = currentQuestion.question;
            document.getElementById('answerInput').value = '';
            document.getElementById('answerInput').disabled = false;
            document.getElementById('submitAnswerBtn').disabled = false;
            document.getElementById('answerResultText').textContent = '';
            questionAnswered = false; // ‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏ß‡πà‡∏≤‡∏ï‡πâ‡∏≠‡∏á‡∏ï‡∏≠‡∏ö‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°
        }

        function clearMathQuestion() {
            currentQuestion = null;
            document.getElementById('mathQuestionText').textContent = '-';
            document.getElementById('answerInput').value = '';
            document.getElementById('answerInput').disabled = false;
            document.getElementById('submitAnswerBtn').disabled = false;
            document.getElementById('answerResultText').textContent = '';
            questionAnswered = true; // ‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏ß‡πà‡∏≤‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°‡πÉ‡∏´‡πâ‡∏ï‡∏≠‡∏ö
        }

        let protectionCount = 1; // ‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡πå‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô

        // ‡∏™‡∏£‡πâ‡∏≤‡∏á element ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô (‡∏ñ‡πâ‡∏≤‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ)
        const protectionNotice = document.createElement('div');
        protectionNotice.id = 'protectionNotice';
        protectionNotice.style.position = 'fixed';
        // *** ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏ï‡∏£‡∏á‡∏ô‡∏µ‡πâ‡πÉ‡∏´‡πâ‡πÅ‡∏™‡∏î‡∏á‡∏ï‡∏£‡∏á‡∏Å‡∏•‡∏≤‡∏á‡∏î‡πâ‡∏≤‡∏ô‡∏ö‡∏ô‡∏Ç‡∏≠‡∏á‡πÄ‡∏ß‡πá‡∏ö (‡∏Ç‡∏ô‡∏≤‡∏î‡πÑ‡∏°‡πà‡πÉ‡∏´‡∏ç‡πà) ***
        protectionNotice.style.top = '70px'; // ‡∏õ‡∏£‡∏±‡∏ö‡πÉ‡∏´‡πâ‡∏≠‡∏¢‡∏π‡πà‡∏î‡πâ‡∏≤‡∏ô‡∏ö‡∏ô‡∏°‡∏≤‡∏Å‡∏Ç‡∏∂‡πâ‡∏ô (‡∏≠‡∏≤‡∏à‡∏õ‡∏£‡∏±‡∏ö‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏•‡∏î‡πÑ‡∏î‡πâ‡∏ï‡∏≤‡∏°‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏´‡∏°‡∏≤‡∏∞‡∏™‡∏°)
        protectionNotice.style.left = '50%';
        protectionNotice.style.transform = 'translateX(-50%)'; // ‡∏à‡∏±‡∏î‡∏Å‡∏∂‡πà‡∏á‡∏Å‡∏•‡∏≤‡∏á‡πÅ‡∏ô‡∏ß‡∏ô‡∏≠‡∏ô
        // *** ‡∏õ‡∏£‡∏±‡∏ö‡∏õ‡∏£‡∏∏‡∏á‡∏™‡πÑ‡∏ï‡∏•‡πå‡πÉ‡∏´‡πâ‡∏Ç‡∏ô‡∏≤‡∏î‡πÑ‡∏°‡πà‡πÉ‡∏´‡∏ç‡πà‡πÅ‡∏•‡∏∞‡∏î‡∏π‡πÇ‡∏î‡∏î‡πÄ‡∏î‡πà‡∏ô‡∏Ç‡∏∂‡πâ‡∏ô ***
        protectionNotice.style.backgroundColor = '#ffc107'; // ‡∏™‡∏µ‡πÄ‡∏´‡∏•‡∏∑‡∏≠‡∏á
        protectionNotice.style.color = '#000'; // ‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏µ‡∏î‡∏≥
        protectionNotice.style.padding = '10px 20px'; // ‡∏õ‡∏£‡∏±‡∏ö padding ‡πÉ‡∏´‡πâ‡πÄ‡∏•‡πá‡∏Å‡∏•‡∏á
        protectionNotice.style.borderRadius = '8px'; // ‡∏õ‡∏£‡∏±‡∏ö‡∏Ñ‡∏ß‡∏≤‡∏°‡πÇ‡∏Ñ‡πâ‡∏á‡∏°‡∏ô
        protectionNotice.style.boxShadow = '0 2px 10px rgba(0,0,0,0.3)'; // ‡∏õ‡∏£‡∏±‡∏ö‡πÄ‡∏á‡∏≤
        protectionNotice.style.fontFamily = 'Kanit, sans-serif';
        protectionNotice.style.fontSize = '16px'; // ‡∏õ‡∏£‡∏±‡∏ö‡∏Ç‡∏ô‡∏≤‡∏î‡∏ü‡∏≠‡∏ô‡∏ï‡πå‡πÉ‡∏´‡πâ‡πÄ‡∏•‡πá‡∏Å‡∏•‡∏á
        protectionNotice.style.display = 'none';
        protectionNotice.style.zIndex = '9999';

        document.body.appendChild(protectionNotice);

        // ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÅ‡∏™‡∏î‡∏á‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô
        function showProtectionMessage(msg) {
            protectionNotice.textContent = msg;
            protectionNotice.style.display = 'block';
            setTimeout(() => {
                protectionNotice.style.display = 'none';
            }, 3000);
        }

        // ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏Ñ‡∏≥‡∏ï‡∏≠‡∏ö
        function checkAnswer() {
            if (questionAnswered) return;  // ‡∏•‡πá‡∏≠‡∏Å‡πÑ‡∏°‡πà‡πÉ‡∏´‡πâ‡∏ï‡∏≠‡∏ö‡∏ã‡πâ‡∏≥‡∏´‡∏≤‡∏Å‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡∏ó‡∏≠‡∏¢‡∏•‡∏π‡∏Å‡πÄ‡∏ï‡πã‡∏≤

            const userAnswer = document.getElementById('answerInput').value.trim();
            const resultText = document.getElementById('answerResultText');

            if (!currentQuestion) {
                resultText.textContent = '‡πÑ‡∏°‡πà‡∏°‡∏µ‡πÇ‡∏à‡∏ó‡∏¢‡πå‡πÉ‡∏´‡πâ‡∏ï‡∏£‡∏ß‡∏à';
                resultText.style.color = 'black';
                return;
            }

            if (userAnswer === '') {
                resultText.textContent = '‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡∏Ñ‡∏≥‡∏ï‡∏≠‡∏ö';
                resultText.style.color = 'black';
                return;
            }

            if (userAnswer === currentQuestion.answer) {
                resultText.innerHTML = `‚úÖ ‡∏Ñ‡∏≥‡∏ï‡∏≠‡∏ö‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á! ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏ó‡∏≠‡∏¢‡∏•‡∏π‡∏Å‡πÄ‡∏ï‡πã‡∏≤‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÑ‡∏õ‡∏ï‡πà‡∏≠<br>üí° ‡∏Ñ‡∏≥‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢: ${currentQuestion.explanation}`;
                resultText.style.color = 'green';

            } else {
                // ‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏ï‡∏≠‡∏ö‡∏ú‡∏¥‡∏î ‡∏û‡∏£‡πâ‡∏≠‡∏°‡∏Ñ‡∏≥‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢
                resultText.innerHTML = `‚ùå ‡∏Ñ‡∏∏‡∏ì‡∏ï‡∏≠‡∏ö‡∏ú‡∏¥‡∏î ‡∏ñ‡∏≠‡∏¢‡∏´‡∏•‡∏±‡∏á 1 ‡∏ä‡πà‡∏≠‡∏á<br>üí° ‡∏Ñ‡∏≥‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢: ${currentQuestion.explanation}`;
                resultText.style.color = 'red';

                if (Math.random() < 0.07) { // 7% ‡πÇ‡∏≠‡∏Å‡∏≤‡∏™‡πÑ‡∏î‡πâ‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡πå‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô‡πÄ‡∏û‡∏¥‡πà‡∏°
                    protectionCount++;
                    showProtectionMessage(`üéâ ‡∏¢‡∏¥‡∏ô‡∏î‡∏µ‡∏î‡πâ‡∏ß‡∏¢! ‡∏Ñ‡∏∏‡∏ì‡πÑ‡∏î‡πâ‡∏£‡∏±‡∏ö‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡πå‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏≠‡∏µ‡∏Å 1 ‡∏Ñ‡∏£‡∏±‡πâ‡∏á (‡∏£‡∏ß‡∏°‡πÄ‡∏õ‡πá‡∏ô ${protectionCount})`);
                }

                if (protectionCount > 0) {
                    protectionCount--;
                    showProtectionMessage(`‡πÉ‡∏ä‡πâ‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡πå‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô‡∏Å‡∏≤‡∏£‡∏ñ‡∏≠‡∏¢‡∏´‡∏•‡∏±‡∏á ‡πÄ‡∏´‡∏•‡∏∑‡∏≠‡∏≠‡∏µ‡∏Å ${protectionCount} ‡∏Ñ‡∏£‡∏±‡πâ‡∏á`);
                } else {
                    if (currentPosition > 0) {
                        currentPosition--; // ‡∏ñ‡∏≠‡∏¢‡∏´‡∏•‡∏±‡∏á 1 ‡∏ä‡πà‡∏≠‡∏á
                        placePlayerAt(currentPosition);
                    }
                }
            }

            // ‡∏•‡πá‡∏≠‡∏Å input ‡∏Å‡∏±‡∏ö‡∏õ‡∏∏‡πà‡∏°‡∏´‡∏•‡∏±‡∏á‡∏ï‡∏≠‡∏ö ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏´‡πâ‡∏ú‡∏π‡πâ‡πÄ‡∏•‡πà‡∏ô‡∏ó‡∏≠‡∏¢‡∏•‡∏π‡∏Å‡πÄ‡∏ï‡πã‡∏≤‡∏ï‡πà‡∏≠‡πÑ‡∏õ
            document.getElementById('answerInput').disabled = true;
            document.getElementById('submitAnswerBtn').disabled = true;
            questionAnswered = true; // ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡πÄ‡∏õ‡πá‡∏ô true ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏≠‡∏ô‡∏∏‡∏ç‡∏≤‡∏ï‡πÉ‡∏´‡πâ‡∏ó‡∏≠‡∏¢‡∏•‡∏π‡∏Å‡πÄ‡∏ï‡πã‡∏≤‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡∏ï‡πà‡∏≠‡πÑ‡∏õ‡πÑ‡∏î‡πâ
        }

        // ‡∏ú‡∏π‡∏Å event listener ‡∏õ‡∏∏‡πà‡∏°‡∏™‡πà‡∏á‡∏Ñ‡∏≥‡∏ï‡∏≠‡∏ö‡πÅ‡∏•‡∏∞‡∏Å‡∏î Enter
        document.getElementById('submitAnswerBtn').addEventListener('click', checkAnswer);
        document.getElementById('answerInput').addEventListener('keydown', function (e) {
            if (e.key === 'Enter') checkAnswer();
        });

        // Event listener ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏õ‡∏∏‡πà‡∏° '‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÉ‡∏´‡∏°‡πà' ‡∏ö‡∏ô‡∏´‡∏ô‡πâ‡∏≤‡∏à‡∏≠‡∏ä‡∏ô‡∏∞
        document.getElementById('restartBtn').addEventListener('click', () => {
            currentPosition = 0; // ‡∏£‡∏µ‡πÄ‡∏ã‡πá‡∏ï‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á‡∏ú‡∏π‡πâ‡πÄ‡∏•‡πà‡∏ô
            placePlayerAt(currentPosition);
            document.getElementById('winMessageContainer').style.display = 'none'; // ‡∏ã‡πà‡∏≠‡∏ô‡∏´‡∏ô‡πâ‡∏≤‡∏à‡∏≠‡∏ä‡∏ô‡∏∞
            clearMathQuestion(); // ‡πÄ‡∏Ñ‡∏•‡∏µ‡∏¢‡∏£‡πå‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°
            protectionCount = 1; // ‡∏£‡∏µ‡πÄ‡∏ã‡πá‡∏ï‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡πå‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô
            questionAnswered = true; // ‡∏≠‡∏ô‡∏∏‡∏ç‡∏≤‡∏ï‡πÉ‡∏´‡πâ‡∏ó‡∏≠‡∏¢‡∏•‡∏π‡∏Å‡πÄ‡∏ï‡πã‡∏≤‡πÑ‡∏î‡πâ
            showProtectionMessage(`‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÉ‡∏´‡∏°‡πà! ‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡πå‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô‡∏£‡∏µ‡πÄ‡∏ã‡πá‡∏ï‡πÄ‡∏õ‡πá‡∏ô ${protectionCount}`);
            updatePlayerPositionText(currentPosition);
        });

        // ‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô‡∏Ç‡∏≠‡∏á‡∏ú‡∏π‡πâ‡πÄ‡∏•‡πà‡∏ô‡πÅ‡∏•‡∏∞‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°
        placePlayerAt(currentPosition);
        updatePlayerPositionText(currentPosition);
    </script>

    <script src="GameRandom.js"></script>
</body>

</html>
